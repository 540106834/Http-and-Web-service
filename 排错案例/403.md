```
403 Forbidden: "{"errors": ["Access denied.  Please include an 'Authorization: ...'
header with a valid API key (https://documentation.onesignal.com/docs/accounts-and-keys)."]}<EOL>"
```
这个提示像一块门禁闸机，举着小红牌轻轻挡住你：**没带钥匙，禁止通行**🔑🚫

这里的守门人是 **OneSignal API**，它在抱怨：

* 你请求里 **缺少 Authorization 头**
* 或者 **API Key 不正确 / 格式不符**
* 或者 **用错类型的 Key（REST API Key vs App ID vs User Auth Key）**

我给你一份快速排查指南，让你像修好一把神奇钥匙那样顺利开门。

## 1. 正确写法长什么样？

OneSignal REST API 需要：

```
Authorization: Basic <REST_API_KEY>
Content-Type: application/json
```

注意是 `Basic`，不是 `Bearer`。

示例（以 cURL 为例）：

```bash
curl -X POST "https://api.onesignal.com/notifications" \
  -H "Authorization: Basic YOUR_REST_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
      "app_id": "YOUR_APP_ID",
      "included_segments": ["All"],
      "contents": {"en": "Hello!"}
  }'
```

## 2. 常见踩坑点（你的错误基本来自这里）

这个 API 特别挑剔，像一个猫咪图书管理员🐈📚：

### ① 用了错误的 key

OneSignal 有 **多个类型的 key**：

| Key                  | 用途        | 能否用于 `Authorization` |
| -------------------- | --------- | -------------------- |
| REST API Key         | 服务端访问，发通知 | ✔️ 必须的               |
| User Auth Key        | 管理用户账号    | ❌                    |
| App ID               | 只是标识应用    | ❌                    |
| Android/iOS push key | 给 SDK 用   | ❌                    |

你需要的是：**REST API Key**

### ② 没写 Basic

很多人会写：

```
Authorization: Bearer xxx
```

这是错的。

一定要：

```
Authorization: Basic xxx
```

### ③ Key 有空格、换行、被截断

从后台复制时常会多复制空格。

### ④ 用客户端（前端）发请求

REST API Key 是**服务端密钥**，不能放浏览器里。
如果你在浏览器直接调用 API，会被 CORS 直接关门。

## 3. 给我看你的请求，我能帮你立刻定位

把你的：

* 请求方式（curl / axios / fetch / Postman）
* 请求头
* 你的代码片段（敏感值用 *** 替换）

发给我，我能马上指出问题在哪里。
你只需要丢上来，我帮你修成可以正常跑的版本✨
